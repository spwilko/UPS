<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Management - APC UPS Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        .mono {
            font-family: 'JetBrains Mono', monospace;
        }
        body {
            background: linear-gradient(135deg, #1a2332 0%, #2d3748 100%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }
        .gradient-text {
            background: linear-gradient(135deg, #00d4ff, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="text-white">
    <!-- Navigation -->
    <nav class="glass fixed top-0 left-0 right-0 z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <img src="resources/QEIICentre.jpg" alt="UPS Icon" class="w-8 h-8">
                <h1 class="text-xl font-bold gradient-text">APC UPS Monitor</h1>
            </div>
            <div class="flex space-x-6">
                <a href="index.html" class="text-gray-300 hover:text-white transition-colors">Dashboard</a>
                <a href="devices.html" class="text-blue-400 hover:text-blue-300 transition-colors border-b-2 border-blue-400">Devices</a>
                <a href="alerts.html" class="text-gray-300 hover:text-white transition-colors">Alerts</a>
                <div class="flex items-center space-x-2">
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-300">System Online</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="pt-24 pb-16">
        <div class="max-w-7xl mx-auto px-6">
            <!-- Header -->
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h2 class="text-3xl font-bold gradient-text mb-2">Device Management</h2>
                    <p class="text-gray-300">Configure and manage your APC UPS devices</p>
                </div>
                <button class="px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors" onclick="runDiscovery()">
                    Run Discovery
                </button>
            </div>

            <!-- Device List -->
            <div class="glass rounded-xl p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold">UPS Devices</h3>
                    <div class="flex space-x-2">
                        <button class="px-4 py-2 bg-gray-600 rounded-lg hover:bg-gray-700 transition-colors" onclick="bulkConfigure()">Bulk Configure</button>
                        <button class="px-4 py-2 bg-green-600 rounded-lg hover:bg-green-700 transition-colors" onclick="exportConfiguration()">Export Config</button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="text-left py-3 px-4">Device Name</th>
                                <th class="text-left py-3 px-4">IP Address</th>
                                <th class="text-left py-3 px-4">Model</th>
                                <th class="text-left py-3 px-4">Status</th>
                                <th class="text-left py-3 px-4">Battery</th>
                                <th class="text-left py-3 px-4">Load</th>
                                <th class="text-left py-3 px-4">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="deviceTable">
                            <!-- Device rows will be generated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Configuration Panel -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="glass rounded-xl p-6" data-config-panel="network">
                    <h4 class="text-xl font-bold mb-4">Network Configuration</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">SNMP Community</label>
                            <input type="text" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" value="public">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">SNMP Version</label>
                            <select class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option>SNMPv1</option>
                                <option>SNMPv2c</option>
                                <option selected>SNMPv3</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Polling Interval (seconds)</label>
                            <input type="number" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" value="30">
                        </div>
                        <button class="w-full px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors">Apply Settings</button>
                    </div>
                </div>

                <div class="glass rounded-xl p-6">
                    <h4 class="text-xl font-bold mb-4">Alert Configuration</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Email Notifications</label>
                            <input type="email" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="admin@company.com">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Battery Alert Threshold (%)</label>
                            <input type="number" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" value="20">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Temperature Alert Threshold (°C)</label>
                            <input type="number" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500" value="40">
                        </div>
                        <button class="w-full px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors">Save Alert Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Device Detail Modal -->
    <div id="deviceModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass rounded-xl p-8 max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold gradient-text" id="modalTitle">Device Details</h3>
                <button onclick="closeDeviceModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h4 class="text-lg font-bold mb-4">Device Information</h4>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-300">Device Name:</span>
                            <span id="modalDeviceName">UPS-01</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">IP Address:</span>
                            <span id="modalIPAddress" class="mono">192.168.1.100</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Model:</span>
                            <span id="modalModel">Smart-UPS SRT 5000</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Serial Number:</span>
                            <span id="modalSerial" class="mono">AS123456789</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Firmware Version:</span>
                            <span id="modalFirmware">v2.0.3</span>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-bold mb-4">Current Status</h4>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-300">Status:</span>
                            <span id="modalStatus" class="text-green-400">Online</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Battery Level:</span>
                            <span id="modalBattery">95%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Load:</span>
                            <span id="modalLoad">45%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Temperature:</span>
                            <span id="modalTemperature">28°C</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Estimated Runtime:</span>
                            <span id="modalRuntime">2h 15m</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-8">
                <h4 class="text-lg font-bold mb-4">Device Controls</h4>
                <div class="flex space-x-4">
                    <button class="px-4 py-2 bg-green-600 rounded-lg hover:bg-green-700 transition-colors" onclick="runSelfTest()">Run Self Test</button>
                    <button class="px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors" onclick="rebootDevice()">Reboot UPS</button>
                    <button class="px-4 py-2 bg-yellow-600 rounded-lg hover:bg-yellow-700 transition-colors" onclick="scheduleShutdown()">Schedule Shutdown</button>
                    <button class="px-4 py-2 bg-red-600 rounded-lg hover:bg-red-700 transition-colors" onclick="emergencyShutdown()">Emergency Shutdown</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Device Modal -->
    <div id="editDeviceModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass rounded-xl p-8 max-w-lg w-full mx-4">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold gradient-text">Edit Device</h3>
                <button onclick="closeEditDeviceModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <form id="editDeviceForm">
                <input type="hidden" id="editDeviceId">
                <div class="space-y-4">
                    <div>
                        <label for="editDeviceName" class="block text-sm font-medium mb-2">Device Name</label>
                        <input type="text" id="editDeviceName" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" class="px-6 py-2 bg-gray-600 rounded-lg hover:bg-gray-700 transition-colors" onclick="closeEditDeviceModal()">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors">
                            Save Changes
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="glass py-8 mt-16">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <p class="text-gray-400">&copy; 2024 APC UPS Monitoring System. Professional power management solution.</p>
        </div>
    </footer>

    <script src="devices.js"></script>
</body>
</html>